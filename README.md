### Binary coverage tool for linux using ptrace and breakpoint interrupts 

Quick way to gather and analyze linux process coverage using ptrace-breakpoints based approach. It uses software interrupt 0xCC to set breakpoints on coverage points generated by (using external symbols generated from utilities like nm). Each hit to the breakpoint is then recorded and breakpoint is restored. 

Usage:

```
user@localhost> ldbgtrace/ldbgtrace --help
linux process tracer using ptrace apis by @shsirk

usage:
   ./ldbgtrace [-pvhcm] -- <exe_path>
   -p: enable if binary is pie enabled (default is OFF)
   -m: module to trace (default is main process executable)
   -v: verbose mode
   -h: help
   -c: coverage options (hit-count|print-summary)

user@localhost> cat test.c
#include <stdio.h>

int foo() {
	printf("	-> inside foo\n");
	return 0;
}
void loz() { printf (" -> inside loz\n"); }
void bar() {
	printf("	-> inside bar\n");
	foo();
	loz(); 
}
int main() {
   bar(); 
}

user@localhost> nm -C ./test > nm.out
user@localhost> ldbgtrace/ldbgtrace -p -- ./test
[trace] (00000530) _start
[trace] (000006a0) __libc_csu_init
[trace] (000004e8) _init
[trace] (00000630) frame_dummy
[trace] (000005a0) register_tm_clones
[trace] (0000068b) main
[trace] (00000664) bar
	-> inside bar
[trace] (0000063a) foo
	-> inside foo
[trace] (00000651) loz
   -> inside loz
[trace] (000005f0) __do_global_dtors_aux
[trace] (00000560) deregister_tm_clones
[trace] (00000714) _fini
```

Note:

1. Using symbol information to put breakpoint on process using ptrace api
2. Using "nm" output format currently, can be easy replaced with custom format
3. Don't work on stripped binaries, in which case use disassembler (IDA,Ghidra) to extract information from binary and write it in the form of nm output)
4. Currently only text output supported as shown in sample output (can be easily replaced with custom output format)

TODO

1. Process attach
2. Support different symbol readers
3. Support different output formatting
4. Make it offset based to support shared module tracing
5. Timeout support for auto kill - can be done using 'killall' command
6. Optimization in symbol readers and trace writers for performance?
7. Shared library
8. Support for single launch multiple-trace-invocation (e.g generating traces for input testsuite)
9. Hit-count support (current implementation is one-time-break approach)
